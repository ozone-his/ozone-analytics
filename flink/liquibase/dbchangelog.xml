<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="enyachoke" id="1629094153790-1">
        <createTable tableName="visits">
            <column name="visit_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="visits_pkey"/>
            </column>
            <column name="patient_id" type="BIGINT"/>
            <column name="visit_type_uuid" type="VARCHAR(38)"/>
            <column name="visit_type" type="VARCHAR(255)"/>
            <column name="date_started" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="date_stopped" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="indication_concept_id" type="BIGINT"/>
            <column name="location_id" type="BIGINT"/>
            <column name="visit_voided" type="BOOLEAN"/>
            <column name="visit_uuid" type="VARCHAR(38)"/>
            <column name="person_id" type="BIGINT"/>
            <column name="number_occurences" type="BIGINT"/>
            <column name="gender" type="VARCHAR(50)"/>
            <column name="birthdate" type="date"/>
            <column name="birthdate_estimated" type="BOOLEAN"/>
            <column name="age_at_visit_group_profile_1" type="VARCHAR"/>
            <column name="age_at_visit" type="BIGINT"/>
            <column name="dead" type="BOOLEAN"/>
            <column name="death_date" type="TIMESTAMP"/>
            <column name="cause_of_death" type="BIGINT"/>
            <column name="person_voided" type="BOOLEAN"/>
            <column name="person_uuid" type="VARCHAR(38)"/>
        </createTable>
    </changeSet>
    <changeSet author="enyachoke" id="1629094153790-2">
        <createIndex indexName="idx_patient_id" tableName="visits">
            <column name="patient_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="enyachoke" id="1629094153790-3">
        <createIndex indexName="idx_location_id" tableName="visits">
            <column name="location_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="enyachoke" id="1629094153790-4">
        <createTable tableName="observations">
            <column name="obs_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="observations_pkey"/>
            </column>
            <column name="person_id" type="BIGINT"/>
            <column name="concept_name" type="TEXT"/>
            <column name="concept_id" type="BIGINT"/>
            <column name="obs_group_id" type="BIGINT"/>
            <column name="accession_number" type="TEXT"/>
            <column name="form_namespace_and_path" type="TEXT"/>
            <column name="value_coded" type="BIGINT"/>
            <column name="value_coded_name" type="TEXT"/>
            <column name="value_coded_name_id" type="BIGINT"/>
            <column name="value_drug" type="BIGINT"/>
            <column name="value_datetime" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="value_numeric" type="FLOAT8"/>
            <column name="value_modifier" type="TEXT"/>
            <column name="value_text" type="TEXT"/>
            <column name="value_complex" type="TEXT"/>
            <column name="comments" type="TEXT"/>
            <column name="creator" type="BIGINT"/>
            <column name="date_created" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="obs_voided" type="BOOLEAN"/>
            <column name="obs_void_reason" type="TEXT"/>
            <column name="previous_version" type="BIGINT"/>
            <column name="encounter_id" type="BIGINT"/>
            <column name="voided_2" type="BOOLEAN"/>
            <column name="visit_id" type="BIGINT"/>
            <column name="visit_date_started" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="visit_date_stopped" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="location_id" type="BIGINT"/>
            <column name="encounter_type_name" type="TEXT"/>
            <column name="encounter_type_description" type="TEXT"/>
            <column name="encounter_type_retired" type="BOOLEAN"/>
            <column name="encounter_type_uuid" type="TEXT"/>
            <column name="visit_type_name" type="TEXT"/>
            <column name="visit_type_retired" type="BOOLEAN"/>
            <column name="visit_type_uuid" type="TEXT"/>
            <column name="location_name" type="TEXT"/>
            <column name="location_address1" type="TEXT"/>
            <column name="location_address2" type="TEXT"/>
            <column name="location_city_village" type="TEXT"/>
            <column name="location_state_province" type="TEXT"/>
            <column name="location_postal_code" type="TEXT"/>
            <column name="location_country" type="TEXT"/>
            <column name="location_retired" type="BOOLEAN"/>
            <column name="location_uuid" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="enyachoke" id="1629094153790-5">
        <createTable tableName="concepts">
            <column name="concept_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="concepts_pkey"/>
            </column>
            <column name="concept_mapping_source" type="TEXT"/>
            <column name="concept_mapping_code" type="TEXT"/>
            <column name="concept_mapping_name" type="TEXT"/>
            <column name="name" type="TEXT"/>
            <column name="locale" type="TEXT"/>
            <column name="locale_preferred" type="BOOLEAN"/>
            <column name="retired" type="BOOLEAN"/>
            <column name="uuid" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="mksrom" id="1629094153790-6">
        <createTable tableName="patients">
            <column name="patient_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="patients_pkey"/>
            </column>
            <column name="given_name" type="VARCHAR"/>
            <column name="middle_name" type="VARCHAR"/>
            <column name="family_name" type="VARCHAR"/>
            <column name="identifier" type="VARCHAR"/>
            <column name="gender" type="VARCHAR"/>
            <column name="birthdate" type="DATE"/>
            <column name="birthdate_estimated" type="BOOLEAN"/>
            <column name="city" type="VARCHAR"/>
            <column name="dead" type="BOOLEAN"/>
            <column name="death_date" type="DATE"/>
            <column name="cause_of_death" type="BIGINT"/>
            <column name="creator" type="int"/>
            <column name="date_created" type="TIMESTAMP"/>
            <column name="person_voided" type="BOOLEAN"/>
            <column name="person_void_reason" type="VARCHAR"/>
        </createTable>
    </changeSet>
</databaseChangeLog>